<%# app/views/games/_card.html.erb %>
<% 
   # Guess the style based on the name
   card_class = if card['name'].downcase.include?("attack")
                  "card-attack"
                elsif card['name'].downcase.include?("block")
                  "card-defend"
                else
                  "card-neutral"
                end

   can_afford = current_mana >= card['cost']
%>

<div class="game-card <%= card_class %> <%= 'disabled' unless can_afford %>">
  <div class="card-header">
    <span class="card-cost"><%= card['cost'] %> ğŸ’</span>
  </div>

  <div class="card-image">
    <%= card_class == 'card-attack' ? 'âš”ï¸' : 'ğŸ›¡ï¸' %>
  </div>

  <div class="card-body">
    <h4><%= card['name'] %></h4>
  </div>

  <div class="card-actions">
    <% if can_afford %>
      <%= button_to "Cast", 
            cast_game_path(id: game_id), 
            params: { hand_index: card['id'] },
            class: "btn-cast",
            form: { data: { turbo_submits_with: "..." } } 
      %>
    <% else %>
      <button class="btn-disabled" disabled>Need Mana</button>
    <% end %>
  </div>
</div>