<%# app/views/games/_game_over_modal.html.erb %>
<%
  is_victory = winner == "player"
  theme_color = is_victory ? "success" : "danger"
  title_text = is_victory ? "VICTORY!" : "GAME OVER"
  body_text = is_victory ? "You have defeated the boss!" : "You were defeated..."
%>

<div class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-75 d-flex align-items-center justify-content-center" 
     style="z-index: 3000; backdrop-filter: blur(5px);">

  <div class="card rounded-0 border-4 border-<%= theme_color %> shadow-lg animate-pop-in" style="width: 80%;">
    
    <div class="card-header bg-<%= theme_color %> text-white text-center rounded-0 p-4 border-bottom border-4 border-dark">
      <h1 class="display-4 fw-bold fst-italic mb-0" style="text-shadow: 2px 2px 0 #000;">
        <%= title_text %>
      </h1>
    </div>

    <div class="card-body bg-light text-center p-4">
      <div class="mb-4 display-1">
        <%= is_victory ? "ðŸ†" : "ðŸ’€" %>
      </div>
      <h4 class="fw-bold text-uppercase mb-4 text-secondary"><%= body_text %></h4>

      <%= button_to "PLAY AGAIN", 
            games_path, 
            method: :post, 
            class: "btn btn-#{theme_color} w-100 btn-lg rounded-0 fw-bold border-2 border-dark text-uppercase shadow",
            style: "border-width: 3px;" 
      %>
      
      <%= link_to "Return to Lobby", root_path, class: "btn btn-link mt-3 text-decoration-none small text-secondary" %>
    </div>

  </div>
</div>